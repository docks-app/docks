<%
  component.config do |config|
    config.defaults code: nil,
                    language: "html",
                    hideable?: false,
                    full_width?: false,
                    hidden?: false,
                    demo?: false,
                    demo: nil,
                    condensed?: false,
                    id: nil,
                    options: []

    config.classes  base: "code-block",
                    header: "code-block__header"

    config.conditional_classes if: :hidden?, base: "code-block--is-hidden"
    config.conditional_classes if: :full_width?, base: "code-block--full-width"
    config.conditional_classes if: :demo?, base: "code-block--with-demo"
    config.conditional_classes if: :demo, base: "code-block--with-demo"
    config.conditional_classes if: :condensed?, base: "code-block--condensed"
  end

  code = if component.code.kind_of?(Array)
    component.code
  else
    [{ code: component.code, language: component.language }]
  end

  has_tabs = code.length > 1
  has_demo = component.demo? || !component.demo.nil?
  has_header = has_tabs || component.options.length > 1
  hideable = component.hidden? || component.hideable? || has_tabs
  id = component.id || unique_iframe_id
%>

<%= code.first[:code] %>
